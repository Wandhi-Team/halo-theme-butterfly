<layout
  xmlns:th="https://www.thymeleaf.org"
  th:replace="~{core/layout :: layout (
  page = 'post',
  title = ${site.title},
  css_pin = ~{::css_pin},
  js_pin = ~{::js_pin},
  main = ~{::main}
  )}"
>
  <!--/* css */-->
  <th:block th:fragment="css_pin">
    <style
      xmlns:th="https://www.thymeleaf.org"
      th:inline="css"
      th:with="above_background = ${not #strings.isEmpty(post.spec.cover) ? post.spec.cover : (theme.config.loading.enable_random_img ? theme.config.loading.random_img  : 'todo-'  )}">
      .above {
        --above-background: /*[(${'url('+above_background+')'})]*/ transparent;
      }
    </style>

    <th:block th:if="${theme.config.code.enable}">
      <link rel="preload stylesheet" as="style" th:href="${assets_link+'plugins/prism/prism.min.css'}">
      <link rel="preload stylesheet" as="style" data-code="light" th:href="${assets_link+ 'plugins/prism/themes/prism-'+theme.config.code.theme_light+'.css'}">
      <link rel="preload stylesheet" as="style" data-code="dark" th:href="${assets_link+'plugins/prism/themes/prism-'+theme.config.code.theme_dark+'.css'}">
      <script type="text/javascript" th:src="${assets_link+'plugins/prism/prism.min.js'}"></script>
    </th:block>

  </th:block>

  <!--/* js */-->
  <th:block th:fragment="js_pin">
  </th:block>


  <!--/* 內容 */-->
  <th:block th:fragment="main">
    <!--    <article class="content card">-->
    <!--      <div class="render-html enable_h_icon" th:utext="${post.content.content}"></div>-->
    <!--    </article>-->
    <th:block th:replace="~{modules/render::postHtml(${post.content.content})}"/>
    <th:block th:replace="~{modules/aside::aside_post}"/>
  </th:block>
</layout>